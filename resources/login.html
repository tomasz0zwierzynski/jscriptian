<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Resource sites</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>

<body>
    <div class="container">

        <div id="msg"></div>

        <form> <br>
            <h5>Username: <input type="text" name="username"
                    style="background:#bfbfbf;color:#212121;border-color:#212121;"
                    onFocus="this.style.background = '#ffffff';" onBlur="this.style.background = '#bfbfbf';"> <br>
                Password: <input type="password" name="password"
                    style="background:#bfbfbf;color:#212121;border-color:#212121;"
                    onFocus="this.style.background = '#ffffff';" onBlur="this.style.background = '#bfbfbf';"> <br>
                <input type="button" value="Login" onClick="login(this.form);"
                    style="background:#bfbfbf;color:#000000;border-color:#212121;" onMouseOver="this.style.color =
        
        '#404040';" onMouseOut="this.style.color = '#000000';" onFocusr="this.style.color = '#404040';"
                    onBlur="this.style.color = '#000000';"></h5>
        </form>
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.4.0.min.js"></script>
<script src="scripts/commons.js"></script>
<script>   
    function login(form) {
        username = form.username.value;
        pass = hash(form.password.value);

        $.post('/auth', { 'user': username, 'password': pass } )
            .done( data => {
                if (data !== 'fail') {
                    localStorage.setItem('token', data);
                    window.location.href = 'sites';
                } else {
                    document.getElementById("msg").innerHTML = 'Wrong username or password';
                }
        
            });

    } 
</script>

</html>